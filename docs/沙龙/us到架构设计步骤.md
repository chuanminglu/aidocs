# 演示2：从Story到设计工件（轻量架构与非功能）

 **时间** : 0:55–1:18（23分钟）

---

## 📥 输入材料

 **来源** : 演示1产出的**最优先Story**

以"实时语音转写与笔录生成"（Story #1，P0优先级）为例：

* 已包含完整验收标准（功能性、性能、安全、异常处理等）
* 已识别技术考量与依赖关系
* 已标注技术风险

---

## 🎯 演示目标

展示AI如何从**功能需求**自动推导出：

1. 架构决策记录（ADR）
2. 非功能需求清单
3. 设计评审Checklist

 **效率对比** : 人工方式2-4小时 → AI辅助15-30分钟

---

## 📋 现场演示三步骤

### **步骤1：生成ADR草案** （8分钟）

#### 输入

Story #1的关键信息：

* 技术考量：ASR引擎选型
* 依赖关系：硬件改造、内网部署
* 技术风险：方言识别、服务崩溃

#### AI输出结构（展示样例）

```markdown
## ADR-001: 语音识别引擎选型

### 背景（Context）
- 公安审讯场景需本地化部署，不能依赖公有云
- 需支持6种方言识别
- 要求准确率普通话≥95%，方言≥85%

### 决策（Decision）
采用**科大讯飞公安专版ASR引擎**（内网部署版）

### 权衡分析（Consequences）
✅ 优势：
  - 公安行业成熟案例（已在20+省市应用）
  - 支持方言定制训练
  - 符合内网部署安全要求
  - 国密算法原生支持

⚠️ 劣势/风险：
  - 采购周期较长（3周含商务流程）
  - 需提前准备本地方言语料
  - License费用较高（约XX万/年）
  - 供应商锁定风险

### 回滚条件（Rollback）
当满足以下条件时启动方案B（开源方案）：
- 方言识别准确率<80%且1个月内无改善
- 商务采购超期2周以上
- 成本超预算30%以上

方案B：Kaldi + WeNet开源组合（需额外2周适配）
```

#### 展示要点

* ✅  **可追溯** : 每个决策点关联Story中的约束条件
* ✅  **可回滚** : 明确触发条件与替代方案
* ⏰  **时间戳** : 记录决策日期与责任人

---

### **步骤2：非功能需求清单** （10分钟）

#### AI自动提取并补充的5大类NFR

##### 🚀 性能SLO

基于Story中的性能标准，生成可度量的服务等级目标：

| 指标          | SLO目标       | 监控方式       | 降级策略         |
| ------------- | ------------- | -------------- | ---------------- |
| 实时转写延迟  | P95 < 3秒     | APM实时监控    | 关闭说话人分离   |
| ASR服务可用性 | 99.5%         | 健康检查心跳   | 降级到纯录音模式 |
| 并发审讯室数  | ≥3           | 资源使用率监控 | 限流排队         |
| 连续工作时长  | ≥8小时无重启 | 内存泄漏监控   | 定时主动重启     |
| 音频处理延迟  | P99 < 500ms   | 链路追踪       | 降低采样率       |

##### 🔒 安全需求

* 本地化部署：所有数据不出公安内网
* 传输加密：审讯室→服务器采用TLS 1.3
* 存储加密：国密SM4算法（符合等保三级）
* 身份认证：对接公安统一身份平台
* 权限控制：RBAC（办案民警/审批领导/技术运维）

##### 🛡️ 隐私与合规

* 数据脱敏：演示/测试环境禁用真实案件数据
* 留痕要求：所有笔录修改记录操作人与时间
* 三同步证据链：音视频与笔录MD5值关联
* 审计日志：保存3年，不可篡改
* 检察监督接口：预留驻所检察室查询权限

##### 📊 可观测性（最小集合）

* **日志** ：
* 业务日志：审讯开始/结束、笔录生成
* 错误日志：ASR服务异常、识别失败
* 审计日志：笔录修改、权限变更
* **指标** ：
* 技术指标：CPU/内存/磁盘、ASR响应时间
* 业务指标：日均审讯量、转写准确率、人工修改率
* **告警** ：
* P0：ASR服务宕机、审讯中断
* P1：准确率低于阈值、磁盘空间不足
* P2：性能抖动、并发超限

##### 🔧 运维与容灾

* 备份策略：音视频实时双机备份
* 恢复目标：RTO < 30分钟，RPO = 0（零数据丢失）
* 断电保护：UPS供电2小时 + 实时落盘
* 故障降级：自动切换到"纯录音模式"
* 版本回滚：支持1小时内回滚到上一版本

---

### **步骤3：设计评审Checklist** （5分钟）

#### 生成10条评审标题（仅框架，不含详细判定规则）

```markdown
## 设计评审Checklist（Story #1专用）

### 1. ✅ 需求完整性
Story中的验收标准是否100%映射到设计方案？

### 2. ✅ 架构合理性
说话人分离、实时转写、笔录生成的模块边界是否清晰？

### 3. ✅ 性能可达性
8小时连续工作、3审讯室并发的硬件配置是否充足？

### 4. ✅ 安全合规性
是否覆盖等保三级要求？是否通过网信部门审查？

### 5. ✅ 异常处理完备性
4种降级场景的自动切换逻辑是否可靠？

### 6. ✅ 可测试性
方言准确率、延迟等指标如何自动化验证？

### 7. ✅ 可运维性
故障时运维人员能否30分钟内定位问题？

### 8. ✅ 成本可控性
硬件/软件/运维成本是否在预算内？是否有隐性成本？

### 9. ✅ 依赖风险
ASR引擎采购延期时，项目B计划是否可行？

### 10. ✅ 交付可验证性
Done定义中的6项标准能否量化评判？
```

#### 展示重点

* 🎯  **针对性** : 每条Checklist直接关联Story中的风险点
* 📏  **可判定** : 避免"架构是否优雅"等主观描述
* 🔗  **可追溯** : 每条标题背后关联具体设计文档章节（付费课详解）

---

## 💬 演示话术要点

### 开场引入

> "现在我们有了这条最高优先级Story，按传统方式，架构师需要：
>
> * 开会讨论技术选型（1-2小时）
> * 编写ADR文档（1小时）
> * 梳理非功能需求（1小时）
> * 准备评审清单（30分钟）
>
> **今天我们用AI把这个过程压缩到15分钟，且产出可追溯、可验证。** "

### 步骤1话术

> "注意，ADR不是拍脑袋的决策。AI自动关联了Story中的约束条件：
>
> * '公安内网部署' → 排除公有云方案
> * '方言识别' → 需要定制化能力
> * '三同步合规' → 需要国密算法支持
>
> 更重要的是，它给出了 **回滚条件** ，这是很多团队容易遗漏的。"

### 步骤2话术

> "看性能SLO这一栏，它不是简单复制Story中的'<3秒'，而是：
>
> * 转化为P95指标（更专业）
> * 配套了监控方式
> * 设计了降级策略
>
> 这就是从需求到工程实现的跨越。"

### 步骤3话术

> "这10条Checklist是针对这条Story定制的，不是通用模板。比如第9条'依赖风险'，就因为Story中明确提到采购周期风险。
>
> **但请注意，我们今天只展示标题，每条背后的判定细则、评分表、案例库，在2天付费课中完整交付。** "

---

## 🚫 留白点（不在现场展开）

### 1. SLO基线与压测脚本

* ❌ 不讲：如何确定P95/P99阈值的统计方法
* ❌ 不讲：压测场景设计与JMeter脚本模板
* ✅ 只展示：最终的SLO表格结果

### 2. 安全/隐私合规矩阵

* ❌ 不讲：等保三级64条控制项如何逐条映射
* ❌ 不讲：GDPR/数据安全法/个人信息保护法的合规检查表
* ✅ 只展示：针对Story #1的5大类安全需求清单

### 3. ADR模板版本与案例库

* ❌ 不讲：ADR模板的演化过程（V1.0 → V3.0）
* ❌ 不讲：50+跨行业ADR案例库的分类索引
* ❌ 不讲：如何根据公司技术栈定制ADR字段
* ✅ 只展示：一个完整ADR样例

---

## 🎯 可视化对比（关键转化点）

### 屏幕左侧：传统方式

```
📝 架构师手动编写ADR         → 60分钟
🔍 翻阅等保文档补充安全需求   → 30分钟  
📋 复制上次评审Checklist模板  → 20分钟
⚠️  遗漏：回滚条件、降级策略
```

### 屏幕右侧：AI辅助

```
⚡ AI生成ADR草案（含回滚）    → 2分钟
⚡ 自动提取并补充NFR          → 3分钟  
⚡ 定制化生成评审Checklist    → 1分钟
✅ 输出：可追溯、可验证、可度量
```

 **效率提升** : 110分钟 → 6分钟（18倍）

 **质量提升** : 零遗漏 + 自动关联Story

---

## 🔗 与演示1的衔接点

| 演示1产出           | 演示2如何使用                |
| ------------------- | ---------------------------- |
| 验收标准（性能）    | → 转化为SLO指标             |
| 技术考量（ASR选型） | → 生成ADR决策分析           |
| 技术风险表          | → 补充容灾与降级策略        |
| 合规性检查点        | → 展开为完整安全/隐私清单   |
| Done定义            | → 设计评审Checklist对应验证 |

 **核心逻辑** : Story中的"非结构化约束" → AI自动转化为"结构化设计工件"

---

## 📊 证据闭环预告

在下一环节（1:18-1:30）将展示：

* ADR编号如何关联Story ID（如ADR-001 ← Story #1）
* 评审Checklist通过率如何进入看板
* 非功能需求如何追溯到测试用例

---

## ❓ 预设应对话术

### Q1: "ADR模板哪里来？"

 **A** : "我们基于Michael Nygard的ADR规范，结合中国软件行业最佳实践，沉淀了3个版本模板（简化版/标准版/合规增强版）。具体选型逻辑在付费课第4模块。"

### Q2: "非功能需求会不会漏？"

 **A** : "AI基于ISO 25010质量模型的8大特性做穷举检查，但会根据Story场景做裁剪。比如这个案例不涉及国际化，AI就不会生成多语言需求。裁剪规则在付费课第6模块。"

### Q3: "评审Checklist谁来判定？"

 **A** : "标题由AI生成，判定细则需要贵司架构委员会定制。我们提供50+行业模板作为基线，2天课中会手把手教你们改造为企业标准。"

---

## ✅ 演示成功标志

* [ ] 观众认可"从Story自动生成ADR"的价值
* [ ] 至少3人询问"SLO基线怎么定"（证明触达痛点）
* [ ] 至少5人拍照记录"非功能需求5大类"表格
* [ ] 引导话术成功将"怎么做"问题导向付费课模块编号
