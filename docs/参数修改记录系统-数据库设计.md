# è‡ªåŠ¨åŒ–å‚æ•°ä¿®æ”¹è®°å½•ç³»ç»Ÿ - MySQL æ•°æ®åº“è®¾è®¡æ–‡æ¡£

## ğŸ“‹ æ–‡æ¡£ä¿¡æ¯

| é¡¹ç›® | å†…å®¹ |
|------|------|
| æ•°æ®åº“ç±»å‹ | MySQL 8.0+ |
| å­—ç¬¦é›† | utf8mb4 |
| æ’åºè§„åˆ™ | utf8mb4_unicode_ci |
| å­˜å‚¨å¼•æ“ | InnoDB |
| æ–‡æ¡£ç‰ˆæœ¬ | 1.0 |
| åˆ›å»ºæ—¥æœŸ | 2025-01-16 |
| æœ€åæ›´æ–° | 2025-01-16 |

---

## ğŸ“Š æ•°æ®åº“æ¦‚è§ˆ

### æ•°æ®åº“åç§°
```sql
CREATE DATABASE IF NOT EXISTS `automation_param_system` 
DEFAULT CHARACTER SET utf8mb4 
COLLATE utf8mb4_unicode_ci;

USE `automation_param_system`;
```

### æ•°æ®è¡¨æ¸…å•

| åºå· | è¡¨å | è¯´æ˜ | è®°å½•æ•°ä¼°ç®— |
|------|------|------|-----------|
| 1 | `sys_site` | è¿è¡Œç°åœºä¿¡æ¯è¡¨ | 50-100 |
| 2 | `sys_automation_system` | è‡ªåŠ¨åŒ–ç³»ç»Ÿä¿¡æ¯è¡¨ | 100-500 |
| 3 | `sys_department` | ç»´æŠ¤éƒ¨é—¨ä¿¡æ¯è¡¨ | 20-50 |
| 4 | `param_modification_record` | å‚æ•°ä¿®æ”¹è®°å½•ä¸»è¡¨ | 10,000+ |
| 5 | `param_modification_detail` | å‚æ•°ä¿®æ”¹è¯¦æƒ…è¡¨ | 50,000+ |
| 6 | `param_version_history` | å‚æ•°ç‰ˆæœ¬å†å²è¡¨ | 100,000+ |
| 7 | `sys_user` | ç³»ç»Ÿç”¨æˆ·è¡¨ | 50-200 |
| 8 | `sys_role` | è§’è‰²è¡¨ | 5-10 |
| 9 | `sys_permission` | æƒé™è¡¨ | 20-50 |
| 10 | `sys_operation_log` | æ“ä½œæ—¥å¿—è¡¨ | 100,000+ |

---

## ğŸ“ è¡¨ç»“æ„è®¾è®¡

### 1. è¿è¡Œç°åœºä¿¡æ¯è¡¨ (sys_site)

**åŠŸèƒ½è¯´æ˜**: å­˜å‚¨ç³»ç»Ÿéƒ¨ç½²çš„åœ°ç†ä½ç½®ä¿¡æ¯

```sql
CREATE TABLE `sys_site` (
  `site_id` INT UNSIGNED NOT NULL AUTO_INCREMENT COMMENT 'ç°åœºID',
  `site_code` VARCHAR(50) NOT NULL COMMENT 'ç°åœºç¼–ç ',
  `site_name` VARCHAR(100) NOT NULL COMMENT 'ç°åœºåç§°',
  `site_location` VARCHAR(200) DEFAULT NULL COMMENT 'è¯¦ç»†åœ°å€',
  `province` VARCHAR(50) DEFAULT NULL COMMENT 'çœä»½',
  `city` VARCHAR(50) DEFAULT NULL COMMENT 'åŸå¸‚',
  `contact_person` VARCHAR(50) DEFAULT NULL COMMENT 'è”ç³»äºº',
  `contact_phone` VARCHAR(20) DEFAULT NULL COMMENT 'è”ç³»ç”µè¯',
  `status` TINYINT NOT NULL DEFAULT 1 COMMENT 'çŠ¶æ€: 0-åœç”¨, 1-å¯ç”¨',
  `sort_order` INT DEFAULT 0 COMMENT 'æ’åºåºå·',
  `remark` VARCHAR(500) DEFAULT NULL COMMENT 'å¤‡æ³¨',
  `created_by` INT UNSIGNED DEFAULT NULL COMMENT 'åˆ›å»ºäººID',
  `created_at` DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP COMMENT 'åˆ›å»ºæ—¶é—´',
  `updated_by` INT UNSIGNED DEFAULT NULL COMMENT 'æ›´æ–°äººID',
  `updated_at` DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP COMMENT 'æ›´æ–°æ—¶é—´',
  `deleted` TINYINT NOT NULL DEFAULT 0 COMMENT 'é€»è¾‘åˆ é™¤: 0-æœªåˆ é™¤, 1-å·²åˆ é™¤',
  PRIMARY KEY (`site_id`),
  UNIQUE KEY `uk_site_code` (`site_code`),
  KEY `idx_city` (`city`),
  KEY `idx_status` (`status`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci COMMENT='è¿è¡Œç°åœºä¿¡æ¯è¡¨';
```

**ç¤ºä¾‹æ•°æ®**:
```sql
INSERT INTO `sys_site` (`site_code`, `site_name`, `city`, `status`) VALUES
('GZ001', 'å¹¿å·', 'å¹¿å·', 1),
('ZZ001', 'éƒ‘å·', 'éƒ‘å·', 1);
```

---

### 2. è‡ªåŠ¨åŒ–ç³»ç»Ÿä¿¡æ¯è¡¨ (sys_automation_system)

**åŠŸèƒ½è¯´æ˜**: å­˜å‚¨è‡ªåŠ¨åŒ–ç³»ç»Ÿçš„åŸºæœ¬ä¿¡æ¯

```sql
CREATE TABLE `sys_automation_system` (
  `system_id` INT UNSIGNED NOT NULL AUTO_INCREMENT COMMENT 'ç³»ç»ŸID',
  `system_code` VARCHAR(50) NOT NULL COMMENT 'ç³»ç»Ÿç¼–ç ',
  `system_name` VARCHAR(200) NOT NULL COMMENT 'ç³»ç»Ÿåç§°',
  `site_id` INT UNSIGNED NOT NULL COMMENT 'æ‰€å±ç°åœºID',
  `department_id` INT UNSIGNED DEFAULT NULL COMMENT 'ç»´æŠ¤éƒ¨é—¨ID',
  `system_type` VARCHAR(50) DEFAULT NULL COMMENT 'ç³»ç»Ÿç±»å‹',
  `role_type` ENUM('ä¸»ç”¨', 'å¤‡ç”¨') NOT NULL DEFAULT 'ä¸»ç”¨' COMMENT 'ä¸»å¤‡è§’è‰²',
  `ip_address` VARCHAR(50) DEFAULT NULL COMMENT 'IPåœ°å€',
  `port` INT DEFAULT NULL COMMENT 'ç«¯å£å·',
  `version` VARCHAR(50) DEFAULT NULL COMMENT 'ç³»ç»Ÿç‰ˆæœ¬',
  `vendor` VARCHAR(100) DEFAULT NULL COMMENT 'å‚å•†',
  `install_date` DATE DEFAULT NULL COMMENT 'å®‰è£…æ—¥æœŸ',
  `warranty_date` DATE DEFAULT NULL COMMENT 'ä¿ä¿®æœŸè‡³',
  `status` TINYINT NOT NULL DEFAULT 1 COMMENT 'çŠ¶æ€: 0-ç¦»çº¿, 1-åœ¨çº¿, 2-ç»´æŠ¤ä¸­',
  `remark` VARCHAR(500) DEFAULT NULL COMMENT 'å¤‡æ³¨',
  `created_by` INT UNSIGNED DEFAULT NULL COMMENT 'åˆ›å»ºäººID',
  `created_at` DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP COMMENT 'åˆ›å»ºæ—¶é—´',
  `updated_by` INT UNSIGNED DEFAULT NULL COMMENT 'æ›´æ–°äººID',
  `updated_at` DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP COMMENT 'æ›´æ–°æ—¶é—´',
  `deleted` TINYINT NOT NULL DEFAULT 0 COMMENT 'é€»è¾‘åˆ é™¤: 0-æœªåˆ é™¤, 1-å·²åˆ é™¤',
  PRIMARY KEY (`system_id`),
  UNIQUE KEY `uk_system_code` (`system_code`),
  KEY `idx_site_id` (`site_id`),
  KEY `idx_department_id` (`department_id`),
  KEY `idx_role_type` (`role_type`),
  KEY `idx_status` (`status`),
  CONSTRAINT `fk_system_site` FOREIGN KEY (`site_id`) REFERENCES `sys_site` (`site_id`),
  CONSTRAINT `fk_system_department` FOREIGN KEY (`department_id`) REFERENCES `sys_department` (`department_id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci COMMENT='è‡ªåŠ¨åŒ–ç³»ç»Ÿä¿¡æ¯è¡¨';
```

**ç¤ºä¾‹æ•°æ®**:
```sql
INSERT INTO `sys_automation_system` (`system_code`, `system_name`, `site_id`, `role_type`) VALUES
('SYS001', 'ç§¦é›·ä¸', 1, 'ä¸»ç”¨'),
('SYS002', 'ç³»ç»Ÿåç§°ç³»ç»Ÿåç§°ç³»ç»Ÿåç§°', 2, 'å¤‡ç”¨');
```

---

### 3. ç»´æŠ¤éƒ¨é—¨ä¿¡æ¯è¡¨ (sys_department)

**åŠŸèƒ½è¯´æ˜**: å­˜å‚¨è´Ÿè´£ç»´æŠ¤çš„éƒ¨é—¨ä¿¡æ¯

```sql
CREATE TABLE `sys_department` (
  `department_id` INT UNSIGNED NOT NULL AUTO_INCREMENT COMMENT 'éƒ¨é—¨ID',
  `department_code` VARCHAR(50) NOT NULL COMMENT 'éƒ¨é—¨ç¼–ç ',
  `department_name` VARCHAR(100) NOT NULL COMMENT 'éƒ¨é—¨åç§°',
  `parent_id` INT UNSIGNED DEFAULT NULL COMMENT 'ä¸Šçº§éƒ¨é—¨ID',
  `department_level` TINYINT DEFAULT 1 COMMENT 'éƒ¨é—¨å±‚çº§',
  `leader_name` VARCHAR(50) DEFAULT NULL COMMENT 'éƒ¨é—¨è´Ÿè´£äºº',
  `leader_phone` VARCHAR(20) DEFAULT NULL COMMENT 'è´Ÿè´£äººç”µè¯',
  `status` TINYINT NOT NULL DEFAULT 1 COMMENT 'çŠ¶æ€: 0-åœç”¨, 1-å¯ç”¨',
  `sort_order` INT DEFAULT 0 COMMENT 'æ’åºåºå·',
  `remark` VARCHAR(500) DEFAULT NULL COMMENT 'å¤‡æ³¨',
  `created_by` INT UNSIGNED DEFAULT NULL COMMENT 'åˆ›å»ºäººID',
  `created_at` DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP COMMENT 'åˆ›å»ºæ—¶é—´',
  `updated_by` INT UNSIGNED DEFAULT NULL COMMENT 'æ›´æ–°äººID',
  `updated_at` DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP COMMENT 'æ›´æ–°æ—¶é—´',
  `deleted` TINYINT NOT NULL DEFAULT 0 COMMENT 'é€»è¾‘åˆ é™¤: 0-æœªåˆ é™¤, 1-å·²åˆ é™¤',
  PRIMARY KEY (`department_id`),
  UNIQUE KEY `uk_department_code` (`department_code`),
  KEY `idx_parent_id` (`parent_id`),
  KEY `idx_status` (`status`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci COMMENT='ç»´æŠ¤éƒ¨é—¨ä¿¡æ¯è¡¨';
```

**ç¤ºä¾‹æ•°æ®**:
```sql
INSERT INTO `sys_department` (`department_code`, `department_name`) VALUES
('DEPT001', 'éƒ¨é—¨åç§°');
```

---

### 4. å‚æ•°ä¿®æ”¹è®°å½•ä¸»è¡¨ (param_modification_record)

**åŠŸèƒ½è¯´æ˜**: å­˜å‚¨å‚æ•°ä¿®æ”¹çš„æ±‡æ€»è®°å½•ï¼ˆå¯¹åº”ç•Œé¢åˆ—è¡¨æ˜¾ç¤ºï¼‰

```sql
CREATE TABLE `param_modification_record` (
  `record_id` BIGINT UNSIGNED NOT NULL AUTO_INCREMENT COMMENT 'è®°å½•ID',
  `system_id` INT UNSIGNED NOT NULL COMMENT 'ç³»ç»ŸID',
  `site_id` INT UNSIGNED NOT NULL COMMENT 'ç°åœºID',
  `department_id` INT UNSIGNED DEFAULT NULL COMMENT 'ç»´æŠ¤éƒ¨é—¨ID',
  `modification_count` INT NOT NULL DEFAULT 0 COMMENT 'å‚æ•°ä¿®æ”¹æ¬¡æ•°',
  `last_modified_at` DATETIME DEFAULT NULL COMMENT 'æœ€åä¿®æ”¹æ—¶é—´',
  `last_modified_by` INT UNSIGNED DEFAULT NULL COMMENT 'æœ€åä¿®æ”¹äººID',
  `last_modified_by_name` VARCHAR(50) DEFAULT NULL COMMENT 'æœ€åä¿®æ”¹äººå§“åï¼ˆå†—ä½™å­—æ®µï¼‰',
  `status` TINYINT NOT NULL DEFAULT 1 COMMENT 'çŠ¶æ€: 0-æ— æ•ˆ, 1-æœ‰æ•ˆ',
  `remark` VARCHAR(500) DEFAULT NULL COMMENT 'å¤‡æ³¨',
  `created_by` INT UNSIGNED DEFAULT NULL COMMENT 'åˆ›å»ºäººID',
  `created_at` DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP COMMENT 'åˆ›å»ºæ—¶é—´',
  `updated_by` INT UNSIGNED DEFAULT NULL COMMENT 'æ›´æ–°äººID',
  `updated_at` DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP COMMENT 'æ›´æ–°æ—¶é—´',
  `deleted` TINYINT NOT NULL DEFAULT 0 COMMENT 'é€»è¾‘åˆ é™¤: 0-æœªåˆ é™¤, 1-å·²åˆ é™¤',
  PRIMARY KEY (`record_id`),
  KEY `idx_system_id` (`system_id`),
  KEY `idx_site_id` (`site_id`),
  KEY `idx_department_id` (`department_id`),
  KEY `idx_last_modified_at` (`last_modified_at`),
  KEY `idx_created_at` (`created_at`),
  CONSTRAINT `fk_record_system` FOREIGN KEY (`system_id`) REFERENCES `sys_automation_system` (`system_id`),
  CONSTRAINT `fk_record_site` FOREIGN KEY (`site_id`) REFERENCES `sys_site` (`site_id`),
  CONSTRAINT `fk_record_department` FOREIGN KEY (`department_id`) REFERENCES `sys_department` (`department_id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci COMMENT='å‚æ•°ä¿®æ”¹è®°å½•ä¸»è¡¨';
```

**å­—æ®µè¯´æ˜**:
- `modification_count`: å¯¹åº”ç•Œé¢çš„"å‚æ•°è®°å½•æ•°"åˆ—
- `last_modified_at`: å¯¹åº”ç•Œé¢çš„"æ›´æ–°æ—¶é—´"åˆ—

---

### 5. å‚æ•°ä¿®æ”¹è¯¦æƒ…è¡¨ (param_modification_detail)

**åŠŸèƒ½è¯´æ˜**: å­˜å‚¨æ¯æ¬¡å‚æ•°ä¿®æ”¹çš„è¯¦ç»†ä¿¡æ¯

```sql
CREATE TABLE `param_modification_detail` (
  `detail_id` BIGINT UNSIGNED NOT NULL AUTO_INCREMENT COMMENT 'è¯¦æƒ…ID',
  `record_id` BIGINT UNSIGNED NOT NULL COMMENT 'è®°å½•IDï¼ˆå…³è”ä¸»è¡¨ï¼‰',
  `system_id` INT UNSIGNED NOT NULL COMMENT 'ç³»ç»ŸIDï¼ˆå†—ä½™å­—æ®µï¼Œä¾¿äºæŸ¥è¯¢ï¼‰',
  `modification_type` VARCHAR(50) NOT NULL COMMENT 'ä¿®æ”¹ç±»å‹: æ–°å¢/ä¿®æ”¹/åˆ é™¤',
  `param_category` VARCHAR(100) DEFAULT NULL COMMENT 'å‚æ•°åˆ†ç±»',
  `param_name` VARCHAR(200) NOT NULL COMMENT 'å‚æ•°åç§°',
  `param_code` VARCHAR(100) DEFAULT NULL COMMENT 'å‚æ•°ç¼–ç ',
  `old_value` TEXT DEFAULT NULL COMMENT 'ä¿®æ”¹å‰å€¼',
  `new_value` TEXT DEFAULT NULL COMMENT 'ä¿®æ”¹åå€¼',
  `value_type` VARCHAR(50) DEFAULT NULL COMMENT 'å€¼ç±»å‹: string/int/float/boolean/json',
  `unit` VARCHAR(20) DEFAULT NULL COMMENT 'å•ä½',
  `modification_reason` VARCHAR(500) DEFAULT NULL COMMENT 'ä¿®æ”¹åŸå› ',
  `approval_status` TINYINT DEFAULT 0 COMMENT 'å®¡æ‰¹çŠ¶æ€: 0-å¾…å®¡æ‰¹, 1-å·²é€šè¿‡, 2-å·²æ‹’ç»',
  `approver_id` INT UNSIGNED DEFAULT NULL COMMENT 'å®¡æ‰¹äººID',
  `approved_at` DATETIME DEFAULT NULL COMMENT 'å®¡æ‰¹æ—¶é—´',
  `effective_status` TINYINT DEFAULT 1 COMMENT 'ç”Ÿæ•ˆçŠ¶æ€: 0-æœªç”Ÿæ•ˆ, 1-å·²ç”Ÿæ•ˆ, 2-å·²å¤±æ•ˆ',
  `effective_at` DATETIME DEFAULT NULL COMMENT 'ç”Ÿæ•ˆæ—¶é—´',
  `modified_by` INT UNSIGNED NOT NULL COMMENT 'ä¿®æ”¹äººID',
  `modified_by_name` VARCHAR(50) DEFAULT NULL COMMENT 'ä¿®æ”¹äººå§“å',
  `modified_at` DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP COMMENT 'ä¿®æ”¹æ—¶é—´',
  `remark` VARCHAR(1000) DEFAULT NULL COMMENT 'å¤‡æ³¨',
  `created_at` DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP COMMENT 'åˆ›å»ºæ—¶é—´',
  PRIMARY KEY (`detail_id`),
  KEY `idx_record_id` (`record_id`),
  KEY `idx_system_id` (`system_id`),
  KEY `idx_param_name` (`param_name`),
  KEY `idx_modified_at` (`modified_at`),
  KEY `idx_approval_status` (`approval_status`),
  CONSTRAINT `fk_detail_record` FOREIGN KEY (`record_id`) REFERENCES `param_modification_record` (`record_id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci COMMENT='å‚æ•°ä¿®æ”¹è¯¦æƒ…è¡¨';
```

---

### 6. å‚æ•°ç‰ˆæœ¬å†å²è¡¨ (param_version_history)

**åŠŸèƒ½è¯´æ˜**: å­˜å‚¨å‚æ•°çš„å®Œæ•´ç‰ˆæœ¬å†å²ï¼Œæ”¯æŒç‰ˆæœ¬å¯¹æ¯”

```sql
CREATE TABLE `param_version_history` (
  `version_id` BIGINT UNSIGNED NOT NULL AUTO_INCREMENT COMMENT 'ç‰ˆæœ¬ID',
  `detail_id` BIGINT UNSIGNED NOT NULL COMMENT 'è¯¦æƒ…IDï¼ˆå…³è”è¯¦æƒ…è¡¨ï¼‰',
  `system_id` INT UNSIGNED NOT NULL COMMENT 'ç³»ç»ŸID',
  `param_name` VARCHAR(200) NOT NULL COMMENT 'å‚æ•°åç§°',
  `param_value` TEXT NOT NULL COMMENT 'å‚æ•°å€¼',
  `version_number` INT NOT NULL COMMENT 'ç‰ˆæœ¬å·',
  `is_current` TINYINT NOT NULL DEFAULT 0 COMMENT 'æ˜¯å¦å½“å‰ç‰ˆæœ¬: 0-å¦, 1-æ˜¯',
  `change_description` VARCHAR(500) DEFAULT NULL COMMENT 'å˜æ›´è¯´æ˜',
  `modified_by` INT UNSIGNED NOT NULL COMMENT 'ä¿®æ”¹äººID',
  `modified_at` DATETIME NOT NULL COMMENT 'ä¿®æ”¹æ—¶é—´',
  `created_at` DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP COMMENT 'åˆ›å»ºæ—¶é—´',
  PRIMARY KEY (`version_id`),
  KEY `idx_detail_id` (`detail_id`),
  KEY `idx_system_param` (`system_id`, `param_name`),
  KEY `idx_version_number` (`version_number`),
  KEY `idx_is_current` (`is_current`),
  CONSTRAINT `fk_version_detail` FOREIGN KEY (`detail_id`) REFERENCES `param_modification_detail` (`detail_id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci COMMENT='å‚æ•°ç‰ˆæœ¬å†å²è¡¨';
```

---

### 7. ç³»ç»Ÿç”¨æˆ·è¡¨ (sys_user)

**åŠŸèƒ½è¯´æ˜**: å­˜å‚¨ç³»ç»Ÿç”¨æˆ·ä¿¡æ¯

```sql
CREATE TABLE `sys_user` (
  `user_id` INT UNSIGNED NOT NULL AUTO_INCREMENT COMMENT 'ç”¨æˆ·ID',
  `username` VARCHAR(50) NOT NULL COMMENT 'ç”¨æˆ·å',
  `password` VARCHAR(255) NOT NULL COMMENT 'å¯†ç ï¼ˆåŠ å¯†å­˜å‚¨ï¼‰',
  `real_name` VARCHAR(50) NOT NULL COMMENT 'çœŸå®å§“å',
  `employee_no` VARCHAR(50) DEFAULT NULL COMMENT 'å·¥å·',
  `email` VARCHAR(100) DEFAULT NULL COMMENT 'é‚®ç®±',
  `phone` VARCHAR(20) DEFAULT NULL COMMENT 'æ‰‹æœºå·',
  `department_id` INT UNSIGNED DEFAULT NULL COMMENT 'æ‰€å±éƒ¨é—¨ID',
  `position` VARCHAR(50) DEFAULT NULL COMMENT 'èŒä½',
  `role_ids` VARCHAR(200) DEFAULT NULL COMMENT 'è§’è‰²IDåˆ—è¡¨ï¼ˆé€—å·åˆ†éš”ï¼‰',
  `avatar` VARCHAR(500) DEFAULT NULL COMMENT 'å¤´åƒURL',
  `last_login_at` DATETIME DEFAULT NULL COMMENT 'æœ€åç™»å½•æ—¶é—´',
  `last_login_ip` VARCHAR(50) DEFAULT NULL COMMENT 'æœ€åç™»å½•IP',
  `login_count` INT DEFAULT 0 COMMENT 'ç™»å½•æ¬¡æ•°',
  `status` TINYINT NOT NULL DEFAULT 1 COMMENT 'çŠ¶æ€: 0-ç¦ç”¨, 1-å¯ç”¨',
  `remark` VARCHAR(500) DEFAULT NULL COMMENT 'å¤‡æ³¨',
  `created_by` INT UNSIGNED DEFAULT NULL COMMENT 'åˆ›å»ºäººID',
  `created_at` DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP COMMENT 'åˆ›å»ºæ—¶é—´',
  `updated_by` INT UNSIGNED DEFAULT NULL COMMENT 'æ›´æ–°äººID',
  `updated_at` DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP COMMENT 'æ›´æ–°æ—¶é—´',
  `deleted` TINYINT NOT NULL DEFAULT 0 COMMENT 'é€»è¾‘åˆ é™¤: 0-æœªåˆ é™¤, 1-å·²åˆ é™¤',
  PRIMARY KEY (`user_id`),
  UNIQUE KEY `uk_username` (`username`),
  KEY `idx_department_id` (`department_id`),
  KEY `idx_status` (`status`),
  CONSTRAINT `fk_user_department` FOREIGN KEY (`department_id`) REFERENCES `sys_department` (`department_id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci COMMENT='ç³»ç»Ÿç”¨æˆ·è¡¨';
```

---

### 8. è§’è‰²è¡¨ (sys_role)

**åŠŸèƒ½è¯´æ˜**: å­˜å‚¨ç³»ç»Ÿè§’è‰²ä¿¡æ¯

```sql
CREATE TABLE `sys_role` (
  `role_id` INT UNSIGNED NOT NULL AUTO_INCREMENT COMMENT 'è§’è‰²ID',
  `role_code` VARCHAR(50) NOT NULL COMMENT 'è§’è‰²ç¼–ç ',
  `role_name` VARCHAR(50) NOT NULL COMMENT 'è§’è‰²åç§°',
  `role_level` TINYINT DEFAULT 1 COMMENT 'è§’è‰²å±‚çº§',
  `description` VARCHAR(200) DEFAULT NULL COMMENT 'è§’è‰²æè¿°',
  `permission_ids` TEXT DEFAULT NULL COMMENT 'æƒé™IDåˆ—è¡¨ï¼ˆé€—å·åˆ†éš”ï¼‰',
  `status` TINYINT NOT NULL DEFAULT 1 COMMENT 'çŠ¶æ€: 0-åœç”¨, 1-å¯ç”¨',
  `sort_order` INT DEFAULT 0 COMMENT 'æ’åºåºå·',
  `created_by` INT UNSIGNED DEFAULT NULL COMMENT 'åˆ›å»ºäººID',
  `created_at` DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP COMMENT 'åˆ›å»ºæ—¶é—´',
  `updated_by` INT UNSIGNED DEFAULT NULL COMMENT 'æ›´æ–°äººID',
  `updated_at` DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP COMMENT 'æ›´æ–°æ—¶é—´',
  `deleted` TINYINT NOT NULL DEFAULT 0 COMMENT 'é€»è¾‘åˆ é™¤: 0-æœªåˆ é™¤, 1-å·²åˆ é™¤',
  PRIMARY KEY (`role_id`),
  UNIQUE KEY `uk_role_code` (`role_code`),
  KEY `idx_status` (`status`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci COMMENT='è§’è‰²è¡¨';
```

**é¢„ç½®è§’è‰²æ•°æ®**:
```sql
INSERT INTO `sys_role` (`role_code`, `role_name`, `description`) VALUES
('ADMIN', 'ç³»ç»Ÿç®¡ç†å‘˜', 'æ‹¥æœ‰æ‰€æœ‰æƒé™'),
('OPERATOR', 'ç³»ç»Ÿæ“ä½œå‘˜', 'å¯ä»¥æ·»åŠ å’Œä¿®æ”¹å‚æ•°'),
('VIEWER', 'æŸ¥çœ‹è€…', 'ä»…å¯æŸ¥çœ‹æ•°æ®');
```

---

### 9. æƒé™è¡¨ (sys_permission)

**åŠŸèƒ½è¯´æ˜**: å­˜å‚¨ç³»ç»Ÿæƒé™ä¿¡æ¯

```sql
CREATE TABLE `sys_permission` (
  `permission_id` INT UNSIGNED NOT NULL AUTO_INCREMENT COMMENT 'æƒé™ID',
  `permission_code` VARCHAR(100) NOT NULL COMMENT 'æƒé™ç¼–ç ',
  `permission_name` VARCHAR(100) NOT NULL COMMENT 'æƒé™åç§°',
  `permission_type` TINYINT NOT NULL COMMENT 'æƒé™ç±»å‹: 1-èœå•, 2-åŠŸèƒ½, 3-æ•°æ®',
  `parent_id` INT UNSIGNED DEFAULT NULL COMMENT 'çˆ¶æƒé™ID',
  `resource_path` VARCHAR(200) DEFAULT NULL COMMENT 'èµ„æºè·¯å¾„',
  `description` VARCHAR(200) DEFAULT NULL COMMENT 'æƒé™æè¿°',
  `status` TINYINT NOT NULL DEFAULT 1 COMMENT 'çŠ¶æ€: 0-åœç”¨, 1-å¯ç”¨',
  `sort_order` INT DEFAULT 0 COMMENT 'æ’åºåºå·',
  `created_at` DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP COMMENT 'åˆ›å»ºæ—¶é—´',
  `updated_at` DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP COMMENT 'æ›´æ–°æ—¶é—´',
  PRIMARY KEY (`permission_id`),
  UNIQUE KEY `uk_permission_code` (`permission_code`),
  KEY `idx_parent_id` (`parent_id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci COMMENT='æƒé™è¡¨';
```

**é¢„ç½®æƒé™æ•°æ®**:
```sql
INSERT INTO `sys_permission` (`permission_code`, `permission_name`, `permission_type`) VALUES
('param:view', 'æŸ¥çœ‹å‚æ•°è®°å½•', 2),
('param:add', 'æ·»åŠ å‚æ•°è®°å½•', 2),
('param:edit', 'ç¼–è¾‘å‚æ•°è®°å½•', 2),
('param:delete', 'åˆ é™¤å‚æ•°è®°å½•', 2),
('param:export', 'å¯¼å‡ºå‚æ•°è®°å½•', 2),
('param:approve', 'å®¡æ‰¹å‚æ•°ä¿®æ”¹', 2);
```

---

### 10. æ“ä½œæ—¥å¿—è¡¨ (sys_operation_log)

**åŠŸèƒ½è¯´æ˜**: è®°å½•æ‰€æœ‰ç”¨æˆ·æ“ä½œï¼Œæ”¯æŒå®¡è®¡è¿½æº¯

```sql
CREATE TABLE `sys_operation_log` (
  `log_id` BIGINT UNSIGNED NOT NULL AUTO_INCREMENT COMMENT 'æ—¥å¿—ID',
  `user_id` INT UNSIGNED DEFAULT NULL COMMENT 'æ“ä½œäººID',
  `username` VARCHAR(50) DEFAULT NULL COMMENT 'æ“ä½œäººç”¨æˆ·å',
  `operation_module` VARCHAR(50) NOT NULL COMMENT 'æ“ä½œæ¨¡å—',
  `operation_type` VARCHAR(50) NOT NULL COMMENT 'æ“ä½œç±»å‹: å¢/åˆ /æ”¹/æŸ¥/å¯¼å‡º/ç™»å½•ç­‰',
  `operation_desc` VARCHAR(500) DEFAULT NULL COMMENT 'æ“ä½œæè¿°',
  `request_method` VARCHAR(10) DEFAULT NULL COMMENT 'è¯·æ±‚æ–¹æ³•: GET/POST/PUT/DELETE',
  `request_url` VARCHAR(500) DEFAULT NULL COMMENT 'è¯·æ±‚URL',
  `request_params` TEXT DEFAULT NULL COMMENT 'è¯·æ±‚å‚æ•°ï¼ˆJSONæ ¼å¼ï¼‰',
  `response_status` INT DEFAULT NULL COMMENT 'å“åº”çŠ¶æ€ç ',
  `response_message` VARCHAR(500) DEFAULT NULL COMMENT 'å“åº”æ¶ˆæ¯',
  `ip_address` VARCHAR(50) DEFAULT NULL COMMENT 'æ“ä½œIP',
  `browser` VARCHAR(100) DEFAULT NULL COMMENT 'æµè§ˆå™¨',
  `os` VARCHAR(100) DEFAULT NULL COMMENT 'æ“ä½œç³»ç»Ÿ',
  `execution_time` INT DEFAULT NULL COMMENT 'æ‰§è¡Œæ—¶é•¿ï¼ˆæ¯«ç§’ï¼‰',
  `error_message` TEXT DEFAULT NULL COMMENT 'é”™è¯¯ä¿¡æ¯',
  `created_at` DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP COMMENT 'æ“ä½œæ—¶é—´',
  PRIMARY KEY (`log_id`),
  KEY `idx_user_id` (`user_id`),
  KEY `idx_operation_type` (`operation_type`),
  KEY `idx_created_at` (`created_at`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci COMMENT='æ“ä½œæ—¥å¿—è¡¨';
```

---

## ğŸ“Š è§†å›¾è®¾è®¡

### 1. å‚æ•°ä¿®æ”¹è®°å½•åˆ—è¡¨è§†å›¾ (v_param_modification_list)

**åŠŸèƒ½è¯´æ˜**: å¯¹åº”ç•Œé¢åˆ—è¡¨æ˜¾ç¤ºï¼Œæ•´åˆå¤šè¡¨æ•°æ®

```sql
CREATE OR REPLACE VIEW `v_param_modification_list` AS
SELECT 
    pmr.record_id,
    ss.site_name AS site_name,
    sas.system_name AS system_name,
    sas.role_type AS role_type,
    sd.department_name AS department_name,
    pmr.modification_count AS param_count,
    pmr.last_modified_at AS update_time,
    pmr.last_modified_by_name AS modifier_name,
    ss.site_id,
    sas.system_id,
    sd.department_id
FROM 
    param_modification_record pmr
    LEFT JOIN sys_automation_system sas ON pmr.system_id = sas.system_id
    LEFT JOIN sys_site ss ON pmr.site_id = ss.site_id
    LEFT JOIN sys_department sd ON pmr.department_id = sd.department_id
WHERE 
    pmr.deleted = 0
    AND sas.deleted = 0;
```

**ä½¿ç”¨ç¤ºä¾‹**:
```sql
-- æŸ¥è¯¢åˆ—è¡¨ï¼ˆå¯¹åº”ç•Œé¢æ˜¾ç¤ºï¼‰
SELECT * FROM v_param_modification_list
ORDER BY update_time DESC
LIMIT 10 OFFSET 10;  -- ç¬¬2é¡µï¼Œæ¯é¡µ10æ¡

-- æŒ‰ç°åœºç­›é€‰
SELECT * FROM v_param_modification_list
WHERE site_name IN ('å¹¿å·', 'éƒ‘å·');

-- å¤šæ¡ä»¶ç­›é€‰
SELECT * FROM v_param_modification_list
WHERE site_name = 'å¹¿å·'
  AND system_name LIKE '%ç§¦é›·ä¸%'
  AND role_type = 'ä¸»ç”¨';
```

---

### 2. å‚æ•°ä¿®æ”¹è¯¦æƒ…è§†å›¾ (v_param_modification_detail)

**åŠŸèƒ½è¯´æ˜**: æŸ¥çœ‹å‚æ•°ä¿®æ”¹çš„è¯¦ç»†ä¿¡æ¯

```sql
CREATE OR REPLACE VIEW `v_param_modification_detail` AS
SELECT 
    pmd.detail_id,
    pmd.record_id,
    sas.system_name,
    ss.site_name,
    pmd.modification_type,
    pmd.param_category,
    pmd.param_name,
    pmd.old_value,
    pmd.new_value,
    pmd.modification_reason,
    pmd.approval_status,
    pmd.modified_by_name,
    pmd.modified_at,
    u.real_name AS approver_name,
    pmd.approved_at
FROM 
    param_modification_detail pmd
    LEFT JOIN param_modification_record pmr ON pmd.record_id = pmr.record_id
    LEFT JOIN sys_automation_system sas ON pmd.system_id = sas.system_id
    LEFT JOIN sys_site ss ON pmr.site_id = ss.site_id
    LEFT JOIN sys_user u ON pmd.approver_id = u.user_id;
```

---

## ğŸ” ç´¢å¼•ä¼˜åŒ–å»ºè®®

### å¤åˆç´¢å¼•

```sql
-- param_modification_record è¡¨
ALTER TABLE param_modification_record 
ADD INDEX idx_site_system_time (site_id, system_id, last_modified_at);

-- param_modification_detail è¡¨
ALTER TABLE param_modification_detail 
ADD INDEX idx_system_param_time (system_id, param_name, modified_at);

-- sys_operation_log è¡¨
ALTER TABLE sys_operation_log 
ADD INDEX idx_user_operation_time (user_id, operation_type, created_at);
```

### å…¨æ–‡ç´¢å¼•ï¼ˆç”¨äºå‚æ•°åç§°æœç´¢ï¼‰

```sql
ALTER TABLE param_modification_detail 
ADD FULLTEXT INDEX ft_param_name (param_name);

-- ä½¿ç”¨ç¤ºä¾‹
SELECT * FROM param_modification_detail
WHERE MATCH(param_name) AGAINST('é€Ÿåº¦ æ¸©åº¦' IN NATURAL LANGUAGE MODE);
```

---

## ğŸ” æ•°æ®å®‰å…¨è®¾è®¡

### 1. æ•æ„Ÿæ•°æ®åŠ å¯†

```sql
-- å¯†ç å­—æ®µä½¿ç”¨ bcrypt æˆ– argon2 ç®—æ³•åŠ å¯†
-- ç¤ºä¾‹ï¼ˆåœ¨åº”ç”¨å±‚å¤„ç†ï¼‰:
-- password: bcrypt.hash(password, 10)

-- æ•æ„Ÿå‚æ•°å€¼åŠ å¯†å­˜å‚¨
ALTER TABLE param_modification_detail 
ADD COLUMN `encrypted` TINYINT DEFAULT 0 COMMENT 'æ˜¯å¦åŠ å¯†: 0-å¦, 1-æ˜¯';
```

### 2. å®¡è®¡è§¦å‘å™¨

```sql
-- å‚æ•°ä¿®æ”¹æ—¶è‡ªåŠ¨æ›´æ–°ä¸»è¡¨è®¡æ•°
DELIMITER $$
CREATE TRIGGER tr_update_modification_count
AFTER INSERT ON param_modification_detail
FOR EACH ROW
BEGIN
    UPDATE param_modification_record
    SET modification_count = modification_count + 1,
        last_modified_at = NEW.modified_at,
        last_modified_by = NEW.modified_by,
        last_modified_by_name = NEW.modified_by_name
    WHERE record_id = NEW.record_id;
END$$
DELIMITER ;
```

### 3. æ“ä½œæ—¥å¿—è§¦å‘å™¨

```sql
-- è®°å½•å‚æ•°ä¿®æ”¹æ“ä½œæ—¥å¿—
DELIMITER $$
CREATE TRIGGER tr_log_param_modification
AFTER INSERT ON param_modification_detail
FOR EACH ROW
BEGIN
    INSERT INTO sys_operation_log (
        user_id,
        username,
        operation_module,
        operation_type,
        operation_desc,
        created_at
    ) VALUES (
        NEW.modified_by,
        NEW.modified_by_name,
        'param_modification',
        NEW.modification_type,
        CONCAT('ä¿®æ”¹å‚æ•°: ', NEW.param_name),
        NEW.modified_at
    );
END$$
DELIMITER ;
```

---

## ğŸ“ˆ æŸ¥è¯¢ä¼˜åŒ–ç¤ºä¾‹

### 1. åˆ†é¡µæŸ¥è¯¢ï¼ˆé«˜æ€§èƒ½ï¼‰

```sql
-- æ¨èæ–¹å¼ï¼ˆä½¿ç”¨ä¸»é”®èŒƒå›´ï¼‰
SELECT * FROM v_param_modification_list
WHERE record_id > (
    SELECT record_id FROM v_param_modification_list
    ORDER BY record_id LIMIT 1 OFFSET 10
)
ORDER BY record_id
LIMIT 10;

-- ä¼ ç»Ÿæ–¹å¼ï¼ˆæ€§èƒ½è¾ƒå·®ï¼‰
SELECT * FROM v_param_modification_list
ORDER BY update_time DESC
LIMIT 10 OFFSET 10;
```

### 2. å¤šæ¡ä»¶æŸ¥è¯¢

```sql
-- åŠ¨æ€ SQL ç¤ºä¾‹ï¼ˆåº”ç”¨å±‚å®ç°ï¼‰
SELECT * FROM v_param_modification_list
WHERE 1=1
  AND (NULLIF(:site_name, '') IS NULL OR site_name = :site_name)
  AND (NULLIF(:system_name, '') IS NULL OR system_name LIKE CONCAT('%', :system_name, '%'))
  AND (NULLIF(:role_type, '') IS NULL OR role_type = :role_type)
  AND (NULLIF(:department_name, '') IS NULL OR department_name = :department_name)
ORDER BY update_time DESC
LIMIT :limit OFFSET :offset;
```

### 3. ç»Ÿè®¡æŸ¥è¯¢

```sql
-- æŒ‰ç°åœºç»Ÿè®¡å‚æ•°ä¿®æ”¹æ¬¡æ•°
SELECT 
    ss.site_name,
    COUNT(pmr.record_id) AS record_count,
    SUM(pmr.modification_count) AS total_modifications
FROM sys_site ss
LEFT JOIN param_modification_record pmr ON ss.site_id = pmr.site_id
WHERE ss.deleted = 0
GROUP BY ss.site_id, ss.site_name;

-- æŒ‰ç³»ç»Ÿç»Ÿè®¡
SELECT 
    sas.system_name,
    sas.role_type,
    COUNT(pmd.detail_id) AS detail_count,
    MAX(pmd.modified_at) AS last_modified_at
FROM sys_automation_system sas
LEFT JOIN param_modification_detail pmd ON sas.system_id = pmd.system_id
GROUP BY sas.system_id, sas.system_name, sas.role_type;
```

---

## ğŸ—„ï¸ æ•°æ®å½’æ¡£ç­–ç•¥

### å½’æ¡£è¡¨è®¾è®¡

```sql
-- åˆ›å»ºå½’æ¡£è¡¨ï¼ˆä¸åŸè¡¨ç»“æ„ç›¸åŒï¼‰
CREATE TABLE `param_modification_detail_archive` LIKE `param_modification_detail`;

-- æ·»åŠ å½’æ¡£æ—¶é—´å­—æ®µ
ALTER TABLE `param_modification_detail_archive`
ADD COLUMN `archived_at` DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP COMMENT 'å½’æ¡£æ—¶é—´';
```

### å½’æ¡£å­˜å‚¨è¿‡ç¨‹

```sql
DELIMITER $$
CREATE PROCEDURE sp_archive_old_data(IN p_days INT)
BEGIN
    DECLARE EXIT HANDLER FOR SQLEXCEPTION
    BEGIN
        ROLLBACK;
        SELECT 'Archive failed' AS result;
    END;
    
    START TRANSACTION;
    
    -- å½’æ¡£ N å¤©å‰çš„æ•°æ®
    INSERT INTO param_modification_detail_archive
    SELECT *, NOW() AS archived_at
    FROM param_modification_detail
    WHERE modified_at < DATE_SUB(NOW(), INTERVAL p_days DAY);
    
    -- åˆ é™¤å·²å½’æ¡£æ•°æ®
    DELETE FROM param_modification_detail
    WHERE modified_at < DATE_SUB(NOW(), INTERVAL p_days DAY);
    
    COMMIT;
    SELECT 'Archive successful' AS result;
END$$
DELIMITER ;

-- æ‰§è¡Œå½’æ¡£ï¼ˆå½’æ¡£1å¹´å‰çš„æ•°æ®ï¼‰
CALL sp_archive_old_data(365);
```

---

## ğŸ’¾ å¤‡ä»½ç­–ç•¥

### 1. å®šæœŸå¤‡ä»½

```bash
#!/bin/bash
# æ¯æ—¥å¤‡ä»½è„šæœ¬

BACKUP_DIR="/backup/mysql"
DB_NAME="automation_param_system"
DATE=$(date +%Y%m%d_%H%M%S)

mysqldump -u root -p${DB_PASSWORD} \
    --single-transaction \
    --routines \
    --triggers \
    --events \
    ${DB_NAME} > ${BACKUP_DIR}/${DB_NAME}_${DATE}.sql

# å‹ç¼©å¤‡ä»½æ–‡ä»¶
gzip ${BACKUP_DIR}/${DB_NAME}_${DATE}.sql

# åˆ é™¤7å¤©å‰çš„å¤‡ä»½
find ${BACKUP_DIR} -name "*.sql.gz" -mtime +7 -delete
```

### 2. å¢é‡å¤‡ä»½

```bash
# å¯ç”¨äºŒè¿›åˆ¶æ—¥å¿—
# my.cnf é…ç½®
[mysqld]
log-bin=mysql-bin
binlog-format=ROW
expire_logs_days=7

# å¢é‡å¤‡ä»½è„šæœ¬
mysqlbinlog mysql-bin.000001 > incremental_backup.sql
```

---

## ğŸ“Š æ€§èƒ½ç›‘æ§

### æ…¢æŸ¥è¯¢æ—¥å¿—

```sql
-- my.cnf é…ç½®
[mysqld]
slow_query_log = 1
slow_query_log_file = /var/log/mysql/slow-query.log
long_query_time = 2

-- åˆ†ææ…¢æŸ¥è¯¢
SELECT * FROM mysql.slow_log
ORDER BY query_time DESC
LIMIT 10;
```

### è¡¨ç»Ÿè®¡ä¿¡æ¯

```sql
-- æŸ¥çœ‹è¡¨å¤§å°
SELECT 
    table_name,
    ROUND(((data_length + index_length) / 1024 / 1024), 2) AS size_mb,
    table_rows
FROM information_schema.TABLES
WHERE table_schema = 'automation_param_system'
ORDER BY size_mb DESC;

-- æŸ¥çœ‹ç´¢å¼•ä½¿ç”¨æƒ…å†µ
SELECT 
    table_name,
    index_name,
    cardinality,
    seq_in_index
FROM information_schema.STATISTICS
WHERE table_schema = 'automation_param_system'
ORDER BY table_name, index_name;
```

---

## ğŸ”§ ç»´æŠ¤å»ºè®®

### 1. å®šæœŸä¼˜åŒ–

```sql
-- åˆ†æè¡¨
ANALYZE TABLE param_modification_record;
ANALYZE TABLE param_modification_detail;

-- ä¼˜åŒ–è¡¨
OPTIMIZE TABLE param_modification_record;
OPTIMIZE TABLE param_modification_detail;

-- æ£€æŸ¥è¡¨
CHECK TABLE param_modification_record;
```

### 2. æ•°æ®æ¸…ç†

```sql
-- æ¸…ç†é€»è¾‘åˆ é™¤çš„æ•°æ®ï¼ˆå®šæœŸæ‰§è¡Œï¼‰
DELETE FROM sys_site WHERE deleted = 1 AND updated_at < DATE_SUB(NOW(), INTERVAL 90 DAY);
DELETE FROM sys_automation_system WHERE deleted = 1 AND updated_at < DATE_SUB(NOW(), INTERVAL 90 DAY);
```

### 3. ç›‘æ§å»ºè®®

- ç›‘æ§è¡¨ç©ºé—´å¤§å°
- ç›‘æ§æ…¢æŸ¥è¯¢æ•°é‡
- ç›‘æ§è¿æ¥æ•°
- ç›‘æ§é”ç­‰å¾…
- å®šæœŸå®¡æŸ¥ç´¢å¼•ä½¿ç”¨ç‡

---

## ğŸ“ é™„å½•

### A. ER å›¾è¯´æ˜

```
sys_site (è¿è¡Œç°åœº)
    â†“ 1:N
sys_automation_system (è‡ªåŠ¨åŒ–ç³»ç»Ÿ)
    â†“ 1:N
param_modification_record (å‚æ•°ä¿®æ”¹è®°å½•)
    â†“ 1:N
param_modification_detail (å‚æ•°ä¿®æ”¹è¯¦æƒ…)
    â†“ 1:N
param_version_history (ç‰ˆæœ¬å†å²)

sys_department (ç»´æŠ¤éƒ¨é—¨)
    â†“ 1:N
sys_user (ç³»ç»Ÿç”¨æˆ·)
    â†“ N:M (é€šè¿‡ role_ids)
sys_role (è§’è‰²)
    â†“ N:M (é€šè¿‡ permission_ids)
sys_permission (æƒé™)
```

### B. å‘½åè§„èŒƒ

- è¡¨åï¼šå°å†™å­—æ¯+ä¸‹åˆ’çº¿ï¼Œä½¿ç”¨å‰ç¼€åŒºåˆ†æ¨¡å—ï¼ˆsys_ã€param_ï¼‰
- å­—æ®µåï¼šå°å†™å­—æ¯+ä¸‹åˆ’çº¿
- ç´¢å¼•åï¼šidx_ + å­—æ®µå
- å”¯ä¸€ç´¢å¼•ï¼šuk_ + å­—æ®µå
- å¤–é”®ï¼šfk_ + è¡¨åç®€å†™ + å­—æ®µå

### C. æ•°æ®å­—å…¸

è¯¦ç»†çš„æ•°æ®å­—å…¸è¯·å‚è€ƒå„è¡¨ç»“æ„è¯´æ˜ã€‚

---

**æ–‡æ¡£ç‰ˆæœ¬**: 1.0  
**åˆ›å»ºæ—¥æœŸ**: 2025-01-16  
**ç»´æŠ¤äºº**: æ•°æ®åº“ç®¡ç†å‘˜  
**å®¡æ ¸çŠ¶æ€**: å¾…å®¡æ ¸
